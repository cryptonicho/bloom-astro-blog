---
// Self-Care App Quiz Component
---

<div id="self-care-quiz" class="bg-gradient-to-r from-rose-50 to-pink-50 rounded-lg p-6 border border-rose-200 my-8">
  <h3 class="text-xl font-bold text-rose-700 mb-4 text-center">üéØ Find Your Perfect Self-Care Planner</h3>
  
  <div id="quiz-questions" class="space-y-4">
    <div class="question" data-question="1">
      <p class="font-semibold text-gray-800 mb-3">1. What's your biggest self-care challenge?</p>
      <div class="space-y-2">
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="q1" value="time" class="text-rose-500">
          <span>I don't have enough time for self-care</span>
        </label>
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="q1" value="routine" class="text-rose-500">
          <span>I struggle to build consistent habits</span>
        </label>
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="q1" value="overwhelm" class="text-rose-500">
          <span>I feel overwhelmed and don't know where to start</span>
        </label>
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="q1" value="motivation" class="text-rose-500">
          <span>I lose motivation quickly</span>
        </label>
      </div>
    </div>

    <div class="question hidden" data-question="2">
      <p class="font-semibold text-gray-800 mb-3">2. What type of self-care activities appeal to you most?</p>
      <div class="space-y-2">
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="q2" value="planning" class="text-rose-500">
          <span>Planning and organizing my wellness routine</span>
        </label>
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="q2" value="meditation" class="text-rose-500">
          <span>Meditation and mindfulness practices</span>
        </label>
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="q2" value="journaling" class="text-rose-500">
          <span>Journaling and self-reflection</span>
        </label>
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="q2" value="variety" class="text-rose-500">
          <span>A variety of different activities</span>
        </label>
      </div>
    </div>

    <div class="question hidden" data-question="3">
      <p class="font-semibold text-gray-800 mb-3">3. How do you prefer to plan your self-care?</p>
      <div class="space-y-2">
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="q3" value="digital" class="text-rose-500">
          <span>Digital planner (accessible anywhere)</span>
        </label>
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="q3" value="paper" class="text-rose-500">
          <span>Physical paper planner</span>
        </label>
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="q3" value="flexible" class="text-rose-500">
          <span>I'm flexible - whichever works best</span>
        </label>
      </div>
    </div>
  </div>

  <div class="mt-6 flex justify-between items-center">
    <button id="prev-btn" class="hidden px-4 py-2 text-rose-600 hover:text-rose-700 font-medium">
      ‚Üê Previous
    </button>
    <button id="next-btn" class="px-6 py-3 bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 text-white rounded-full font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
      Next ‚Üí
    </button>
  </div>

  <div id="quiz-result" class="hidden mt-6 p-6 bg-white rounded-lg border border-rose-300">
    <div class="text-center">
      <h4 class="text-2xl font-bold text-rose-700 mb-3">üåü Your Perfect Match: Bloom!</h4>
      <p class="text-gray-700 mb-4">Based on your answers, Bloom Self-Care Planner is the ideal solution for you. Here's why:</p>
      <ul id="recommendation-reasons" class="text-left text-sm text-gray-600 mb-6 space-y-2">
        <!-- Reasons will be populated by JavaScript -->
      </ul>
      <div class="mt-6">
        <a href="https://www.selfcareplanner.app/?autoQuiz=true" target="_blank" rel="noopener noreferrer" class="inline-block bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 text-white !text-white px-8 py-4 rounded-full font-bold text-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300" style="color: white;">
          Start Your Free Journey with Bloom ‚Üí
        </a>
        <p class="text-xs text-gray-500 mt-3">No credit card required ‚Ä¢ 100% free to start</p>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    let currentQuestion = 1;
    const totalQuestions = 3;
    const answers: Record<string, string> = {};

    const nextBtn = document.getElementById('next-btn');
    const prevBtn = document.getElementById('prev-btn');
    const questions = document.querySelectorAll('.question');
    const result = document.getElementById('quiz-result');

    // Update button states
    function updateButtons() {
      const currentQuestionEl = document.querySelector(`[data-question="${currentQuestion}"]`);
      if (!currentQuestionEl) return;
      
      const selectedAnswer = currentQuestionEl.querySelector('input[type="radio"]:checked');
      
      if (nextBtn) {
        (nextBtn as HTMLButtonElement).disabled = !selectedAnswer;
        if (currentQuestion === totalQuestions && selectedAnswer) {
          nextBtn.textContent = 'Get My Recommendation ‚Üí';
        } else {
          nextBtn.textContent = 'Next ‚Üí';
        }
      }
      
      if (prevBtn) {
        prevBtn.style.display = currentQuestion > 1 ? 'block' : 'none';
      }
    }

    // Show question
    function showQuestion(questionNum: number) {
      questions.forEach(q => q.classList.add('hidden'));
      const questionEl = document.querySelector(`[data-question="${questionNum}"]`);
      if (questionEl) {
        questionEl.classList.remove('hidden');
      }
      updateButtons();
    }

    // Add event listeners to radio buttons
    questions.forEach(question => {
      const radioButtons = question.querySelectorAll('input[type="radio"]');
      radioButtons.forEach(radio => {
        radio.addEventListener('change', updateButtons);
      });
    });

    // Next button click
    if (nextBtn) {
      nextBtn.addEventListener('click', function() {
        const currentQuestionEl = document.querySelector(`[data-question="${currentQuestion}"]`);
        if (!currentQuestionEl) return;
        
        const selectedAnswer = currentQuestionEl.querySelector('input[type="radio"]:checked') as HTMLInputElement;
        
        if (selectedAnswer) {
          answers[`q${currentQuestion}`] = selectedAnswer.value;
          
          if (currentQuestion < totalQuestions) {
            currentQuestion++;
            showQuestion(currentQuestion);
          } else {
            showResult();
          }
        }
      });
    }

    // Previous button click
    if (prevBtn) {
      prevBtn.addEventListener('click', function() {
        if (currentQuestion > 1) {
          currentQuestion--;
          showQuestion(currentQuestion);
        }
      });
    }

    // Show result
    function showResult() {
      const questionsEl = document.getElementById('quiz-questions');
      const buttonsEl = nextBtn?.parentElement;
      
      if (questionsEl) questionsEl.classList.add('hidden');
      if (buttonsEl) buttonsEl.style.display = 'none';
      if (result) result.classList.remove('hidden');

      // Generate exactly 3 personalized reasons
      const reasons: string[] = [];
      
      // First reason based on their main challenge
      if (answers.q1 === 'time') {
        reasons.push('‚úÖ Quick 3-minute daily check-ins that fit into your busiest days');
      } else if (answers.q1 === 'routine') {
        reasons.push('‚úÖ Build lasting self-care habits with gentle daily reminders');
      } else if (answers.q1 === 'overwhelm') {
        reasons.push('‚úÖ Simple, calming interface that makes self-care feel effortless');
      } else if (answers.q1 === 'motivation') {
        reasons.push('‚úÖ Stay motivated with streaks and encouraging progress tracking');
      }

      // Second reason - always highlight it's designed for women
      reasons.push('‚úÖ Designed specifically for women who want to prioritize their wellbeing');
      
      // Third reason - always highlight it's free
      reasons.push('‚úÖ Completely free to start - no credit card required');

      const reasonsList = document.getElementById('recommendation-reasons');
      if (reasonsList) {
        reasonsList.innerHTML = reasons.map(reason => `<li>${reason}</li>`).join('');
      }
    }

    // Initialize
    showQuestion(1);
  });
</script>